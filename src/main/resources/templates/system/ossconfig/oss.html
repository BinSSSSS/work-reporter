<html>
<head>
<#include "/common/common2.ftl"/>
</head>
<body>
	<div id="rrapp" v-cloak>
		<div v-show="showList">
			<div class="m-b-md"></div>
			<header class="panel-heading">
				<div class="doc-buttons">
					<a class="layui-btn layui-btn-normal" id="upload" @click="upload">
						<i class="fa fa-plus"></i>
						&nbsp;上传文件
					</a>
					<a class="layui-btn layui-btn-normal" @click="del">
						<i class="fa fa-trash-o"></i>
						&nbsp;删除
					</a>
				</div>
			</header>
			<div class="table-responsive">
				<table class="layui-hide" id="osstable"></table>
			</div>
		</div>
		<div v-show="!showList" class="panel panel-default">
			<div class="panel-heading">{{title}}</div>
			<form class="layui-form-layui-form-pane"
			action="javascript:void(0)" method="post" enctype="multipart/form-data" id="uploadForm">
				<div class="layui-form-item">
						<label class="layui-form-label">选择上传的存储桶</label>
						<div class="layui-input-inline">
							<select class="layui-input" id="ossConfig" name="configId">
								<option v-for=" item in ossConfigList " :value="item.id">
									{{item.description}}
								</option>
							</select>
						</div>
				</div>
				<div class="layui-form-item">
						<label class="layui-form-label">选择上传的文件</label>
						<div class="layui-input-block">
							<input type="file" class="layui-input" required name="file"/>
						</div>
				</div>
				<div class="layui-form-item">
					<label class="layui-form-label"></label>
					<input type="submit" class="layui-btn layui-btn-normal" value="确定" />
					&nbsp;&nbsp;
					<input type="button" class="layui-btn layui-btn-danger" @click="reload" value="返回" />
				</div>
			</form>
		</div>
	</div>
	<script type="text/javascript" src="/js/system/oss/ajaxupload.js"></script>
	<script type="text/javascript" src="/js/system/oss/oss.js"></script>
</body>
<script type="text/javascript">
/*     new AjaxUpload('#upload', {
        action : '/sys/oss_do/upload.do',
        name : 'file',
        autoSubmit : true,
        responseType : "json",
        onSubmit : function(file, extension) {
            if (vm.config.type == null) {
                alert("云存储配置未配置");
                return false;
            }
            if (!(extension && /^(jpg|jpeg|png|gif)$/.test(extension.toLowerCase()))) {
                alert('只支持jpg、png、gif格式的图片！');
                return false;
            }
        },
        onComplete : function(file, r) {
            vm.reload();
            alert('图片url:' + r.url);
        }
    }); */
</script>
</html>